<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gromain — Signal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Supabase Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

    <style>
        body {
            background-color: #0b0b0b;
            color: #e6e6e6;
            font-family: Arial, Helvetica, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            max-width: 420px;
            width: 90%;
            text-align: center;
        }
        h1 {
            font-weight: 500;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        .lore {
            font-size: 0.95em;
            opacity: 0.85;
            margin-bottom: 25px;
        }
        input[type="email"] {
            width: 100%;
            padding: 14px;
            background: #111;
            border: 1px solid #333;
            color: #fff;
            font-size: 1em;
            margin-bottom: 12px;
        }
        button {
            width: 100%;
            padding: 14px;
            background: #1f1f1f;
            border: 1px solid #444;
            color: #fff;
            font-size: 1em;
            cursor: pointer;
        }
        button:hover {
            background: #2a2a2a;
        }
        .legal {
            font-size: 0.75em;
            opacity: 0.6;
            margin-top: 14px;
        }
        .footer-lore {
            font-size: 0.75em;
            opacity: 0.5;
            margin-top: 20px;
        }

        /* Klingon confirmation text */
        #confirmation {
            display: none;
            font-size: 1em;
        }
    </style>
</head>
<body>

<div class="container" id="mainContainer">

    <h1>Signal Your Intent</h1>

    <div class="lore">
        This is not a registration.
    </div>

    <form id="signalForm">
        <input type="email" id="emailInput" placeholder="Enter your email address" required>
        <button type="submit">Transmit</button>
    </form>

    <div class="legal">
        By submitting, you agree to receive communication related to Gromain.
    </div>

    <div class="footer-lore">
        Silence does not mean rejection.
    </div>

</div>

<!-- Klingon confirmation -->
<div id="confirmation">
    potlhbogh QInmey neH janglu’.
</div>

<script>
const supabaseUrl = "https://tlokggunichlqqstutav.supabase.co";
const supabaseKey = "PASTE_YOUR_ANON_PUBLIC_KEY_HERE";

const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

const form = document.getElementById("signalForm");
const emailInput = document.getElementById("emailInput");
const container = document.getElementById("mainContainer");
const confirmation = document.getElementById("confirmation");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = emailInput.value;

    const { error } = await supabaseClient
        .from("signals")
        .insert([{ email: email }]);

    if (!error) {

        // Hide form + content
        container.style.display = "none";

        // Show Klingon message centered
        confirmation.style.display = "block";

    } else {
        alert("Transmission error. Try again.");
    }
});
</script>

</body>
</html>
